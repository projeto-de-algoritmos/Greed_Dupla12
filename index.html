<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    
    /* Estilos para formatar a página */
    body {
      font-family: Arial, sans-serif;
      background-color: rgb(255, 255, 255);
    }
    h1 {
      text-align: center;
    }
    #troco {
      text-align: center;
      margin: 20px auto;
      width: 200px;
      padding: 10px;
      border: 1px solid black;
    }
    table {
      margin: 20px auto;
      width: 200px;
      padding: 10px;
      border: 1px solid black;
    }
    #resultado {
      text-align: center;
      margin-top: 20px;
      font-weight: bold;
    }
    button {
      margin-top: 10px;
    }
  
  </style>
</head>

<body>


  <div class="row justify-content-center">
    <div class="col-md-6 text-center">
      <h1 class="mb-4">OptiCash</h1>
      <img src="logo.gif" alt="Logo" style="max-width: 150px;">

    </div>
  </div>


  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card">
          <div class="card-body">
            <h2 class="card-title text-center">Valor da compra:</h2>
            <form>
              <div class="form-group">
                <label for="valorCompra"></label>
                <input type="number" class="form-control" id="valorCompra" min="0" step="0.01" placeholder="R$">
              </div>

              <h2 class="card-title text-center">Valor pago:</h2>
              <div class="form-group">
                <label for="valorPago"></label>
                <input type="number" class="form-control" id="valorPago" min="0" step="0.01" placeholder="R$">
              </div>

              <div class="form-check text-center">
                <input class="form-check-input" type="checkbox" id="limitarQuantidade"
                  onchange="toggleQuantidadesMaximas()">
                <label class="form-check-label " for="limitarQuantidade">
                  Limitar quantidade
                </label>
              </div>

              <div id="quantidadesMaximas" class="slide-out">
                <h2 class="card-title text-center">Quantidade máxima de moedas:</h2>
                <div class="form-group">
                  <label for="quantidade100">R$ 1,00:</label>
                  <input type="number" class="form-control" id="quantidade100" min="0">
                </div>
                <div class="form-group">
                  <label for="quantidade50">R$ 0,50:</label>
                  <input type="number" class="form-control" id="quantidade50" min="0">
                </div>
                <div class="form-group">
                  <label for="quantidade25">R$ 0,25:</label>
                  <input type="number" class="form-control" id="quantidade25" min="0">
                </div>
                <div class="form-group">
                  <label for="quantidade10">R$ 0,10:</label>
                  <input type="number" class="form-control" id="quantidade10" min="0">
                </div>
                <div class="form-group">
                  <label for="quantidade5">R$ 0,05:</label>
                  <input type="number" class="form-control" id="quantidade5" min="0">
                </div>
                <div class="form-group">
                  <label for="quantidade1">R$ 0,01:</label>
                  <input type="number" class="form-control" id="quantidade1" min="0">
                </div>
              </div>

              <div class="text-center">
                <button type="button" class="btn custom-button" id="calcularBtn"
                  onclick="calcularTroco()">Calcular</button>
              </div>



            </form>
          </div>
          <div class="text-center mt-4">
            <div class="d-inline-block">
              <div id="resultado"></div>
            </div>
          </div>


        </div>

      </div>

    </div>

  </div>

  <script>
    function toggleQuantidadesMaximas() {
      const quantidadesMaximas = document.getElementById("quantidadesMaximas");
      quantidadesMaximas.style.display = document.getElementById("limitarQuantidade").checked ? "block" : "none";
    }

    function encontrarMenorTroco(valorTroco, quantidadesMaximas) {
      const moedas = [100, 50, 25, 10, 5, 1]; // Denominações das moedas disponíveis
      const quantidadeMoedas = {}; // Objeto para armazenar a quantidade de moedas de cada valor

      function inicializarQuantidadeMoedas() {
        for (let i = 0; i < moedas.length; i++) {
          const moeda = moedas[i];
          quantidadeMoedas[moeda] = 0; // Inicializa a quantidade de cada moeda como 0
        }
      }

      inicializarQuantidadeMoedas(); // Inicializa o objeto de resposta com 0 moedas para cada valor

      for (let i = 0; i < moedas.length; i++) {
        const valorMoeda = moedas[i];
        while (valorTroco >= valorMoeda && (!quantidadesMaximas || quantidadeMoedas[valorMoeda] < quantidadesMaximas[valorMoeda])) {
          quantidadeMoedas[valorMoeda]++;
          valorTroco -= valorMoeda;
        }
      }

      return quantidadeMoedas; // Retorna o objeto com a quantidade de moedas de cada valor
    }

    function calcularTroco() {
      const valorCompra = parseFloat(document.getElementById("valorCompra").value) || 0;
      const valorPago = parseFloat(document.getElementById("valorPago").value) || 0;
      const troco = Math.round((valorPago - valorCompra) * 100);
      const limitarQuantidade = document.getElementById("limitarQuantidade").checked;

      let quantidadesMaximas = null;
      if (limitarQuantidade) {
        quantidadesMaximas = {
          100: parseInt(document.getElementById("quantidade100").value) || Infinity,
          50: parseInt(document.getElementById("quantidade50").value) || Infinity,
          25: parseInt(document.getElementById("quantidade25").value) || Infinity,
          10: parseInt(document.getElementById("quantidade10").value) || Infinity,
          5: parseInt(document.getElementById("quantidade5").value) || Infinity,
          1: parseInt(document.getElementById("quantidade1").value) || Infinity,
        };
      }

      const trocoQtdValores = encontrarMenorTroco(troco, quantidadesMaximas);

      if (troco < 0) {
        document.getElementById("resultado").innerHTML = "Pagamento insuficiente.";
        return;
      }

      let resultado = "<table>";
      resultado += "<tr><th class='espc'>Valor</th><th>Quantidade</th></tr>";


      for (const moeda in trocoQtdValores) {
        const quantidade = trocoQtdValores[moeda];
        resultado += "<tr><td>" + formatarValor(moeda) + "</td><td>" + quantidade + "</td></tr>";
      }

      resultado += "</table>";
      resultado += "Troco: " + formatarValor(troco);

      document.getElementById("resultado").innerHTML = resultado;
    }

    function formatarValor(valorCentavos) {
      const valorReais = Math.floor(valorCentavos / 100); // Valor em reais (parte inteira)
      const valorCentavosRestantes = valorCentavos % 100; // Centavos restantes

      const centavosFormatados = valorCentavosRestantes.toLocaleString('pt-BR', { minimumIntegerDigits: 2 });

      return `R$ ${valorReais},${centavosFormatados}`;
    }




  </script>
</body>

</html>